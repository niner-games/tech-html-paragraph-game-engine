<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Settings</title>

    <script src="js/autoloader.js"></script>
</head>
<body>

    <div id="background">

        <div text="Customize the game to your needs."></div>

        <div id="language-overlay" class="overlay"></div>
        <div id="theme-overlay" class="overlay"></div>
        <div id="transformation-overlay" class="overlay"></div>

    </div>

    <script>
        window.addEventListener("load", function() {
            generateButtons(
                AutoLoader.languages,
                ['btn-success'],
                (event, key) => TranslationEngine.setLanguage(key),
                document.getElementById('language-overlay')
            );

            generateButtons(
                AutoLoader.themes,
                ['btn-warning'],
                (event, key) => ThemeEngine.setTheme(key),
                document.getElementById('theme-overlay')
            );

            generateButtons(
                AutoLoader.transformations,
                ['btn-info'],
                (event, key) => ThemeEngine.setTransformation(key),
                document.getElementById('transformation-overlay')
            );
        });

        function generateButtons(sourceArray, colorsArray, eventListener, parentElement) {
            let i = 0;
            let style = "ltr";

            for (let key in sourceArray) {
                if (sourceArray.hasOwnProperty(key)) {
                    let button = document.createElement("button");

                    style = (key === "iw") ? "rtl" : style;

                    button.value = key;
                    button.style.direction = style;
                    button.textContent = sourceArray[key];

                    button.classList.add('btn');
                    button.classList.add(colorsArray[i % colorsArray.length]);

                    // button.addEventListener('click', () => eventListener);
                    button.addEventListener('click', (event) => eventListener(event, key));

                    parentElement.appendChild(button);

                    i++;
                }
            }
        }
    </script>

</body>
</html>